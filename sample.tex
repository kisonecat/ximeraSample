\documentclass{ximera}

\title{This is the sample!}
\author{JIM!}

\begin{document}
\begin{abstract}
Testing interactives and ff.
\end{abstract}
\maketitle

waffle and Jeff and fine.

\begin{tikzpicture}
  \draw (0,0) circle (1in);
  \draw (0,0) circle (0.25in);
  \draw (0,0) -- (1in,1in);
\end{tikzpicture}

\begin{problem}
  So pick a variable.
  \begin{multipleChoice}[id=v]
    \choice[correct,value=x]{$x$}
    \choice[value=y]{$y$}
    \choice[value=z]{$z$}
  \end{multipleChoice}

  % propagate right and wrong to other \js places
  You picked $\js{v}$ or, in text, \js{v}.

  %\begin{javascript}
  %  bob.on('change', function() {
  %    px = bob.x;
  %    py = bob.y;
  %  });
  %\end{javascript}

  %$(\answer[id=px,format=float]{4},\answer[id=py,format=float]{4})$

  \begin{validator}[bob.n_e == 3]
  %  \includeinteractive[id=bob,x=px,y=py]{example2.js}
  
    \includeinteractive[id=bob,width=10,height=10]{phase.js}

  %  $(\js{bob.x},\js{bob.y})$
  \end{validator}

\end{problem}

\begin{problem}
  Find two integers which sum to twenty five.

  % this should be a callback potentially (I guess if it returns a function?)
  \begin{validator}[a+b==25]
    $\answer[format=integer,id=a]{16} + \answer[format=integer,id=b]{9} = 25$.
  \end{validator}

  Find a traceless matrix with integer entries.
  \begin{validator}[a11+a22==0]
    \[
      \begin{bmatrix}
        \answer[format=integer,id=a11]{0} &         \answer[format=integer,id=a12]{0} \\
        \answer[format=integer,id=a21]{0} &         \answer[format=integer,id=a22]{0} \\
      \end{bmatrix}
      \]
  \end{validator}


\end{problem}

\begin{problem}
  String equality is like $\mbox{Dog} = \answer[format=string,id=word]{Dog}$.  Or just $\answer[format=string]{WHEE}$.

  So the format determines a default validator, like format=string determines validator=stringEquality.  And now I removed the CDATA.
\end{problem}

\begin{javascript}
  function isPositive(number) {
    return number > 0;
  }
\end{javascript}

\begin{problem}
  %An example of a positive number is $\answer[id=z,validator=isPositive(z)]{17}$.

  %$\answer[validator=this>0]{17}$.

  % validator should return 0 or false, 1 or true, partial credit btween 0 and 1, ...
  %$\answer[validator=isPositive]{17}$.

  The tolerance (0.01) means $8 \approx \answer[tolerance=0.01,id=x,format=integer]{8}$
  
  \begin{feedback}
    The answer is definitely more than five.
  \end{feedback}

  \begin{feedback}[x==10]
    The answer is certainly not ten.
  \end{feedback}

  A function is $f(x) = \answer[id=f]{x^2}$.
\end{problem}

\begin{javascript}
  letters = word.length;
\end{javascript}

And another one.  $x + 10 = \js{x+10}$ is equal to \js{x + 10}.

Since $f(\js{v}) = \js{f}$, we decide what?  Well then $f'(\js{v}) = \js{f.derivative(v)}$.

And the word ``\js{word}'' is \js{letters} letters long.

$\js{2+5} = 7$.

\end{document}
